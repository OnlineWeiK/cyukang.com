---
layout: post
title: "折腾服务器"
description: ""
category:
tags: []
---
{% include JB/setup %}

最近花了一些时间研究机器的部署，主要是实践了网络安装服务器和OpenStack部署。

## 网络安装Ubuntu
如果有多台服务器，网络安装似乎是唯一的选择。基本原理就是在局域网里面配置一个host，里面配置好一个HDCP服务和TFTP服务，用Apache弄一个系统镜像供服务器下载。
当然这里面有许多许多的坑，一个一个爬出来感觉还是挺好的。我把一些记录在了这个[Gist](https://gist.github.com/chenyukang/0f67b9ef0a8c32aa8f95)里面。
Kickstart用来自动化安装过程，这样安装过程中就不会弹出等待用户输入的对话款。总的来说就是：

`dhcp + tftp + web服务器 + ubuntu镜像 + kickstart : 局域网自动部署`

弄这些似乎有点回到从前的感觉，我在05年左右大二的时候开始折腾系统。那时候Ubuntu正在作推广，在校学生可以免费申请光盘。因此，从4.04开始所有的Ubuntu盘我都有一份，
经常乐此不疲地安装。当然也安装过各种Linux其他发行版。有时候出现问题还会找一些学长来帮忙弄。现在想来挺浪费时间的，应该花时间来多学些基础的东西。

弄完这网络安装以后我就想，如果当年整个男生宿舍弄这么一个安装系统的服务器，那可是能节省很多同学的时间啊！


## OpenStack 安装部署
OpenStack号称下一个Linux，分为很多独立的部件组成，看起来是一套很复杂的系统。我们主要是想利用OpenStack来构建私有云。
OpenStack的安装涉及到非常多的包，过程和配置都稍微有些复杂。所幸这里有一个比较成熟的安装脚本[OpenStackGeek](https://github.com/StackGeek/openstackgeek)。
是一些比较简单的shell脚本，我们在这个基础上自己做了一些默认配置，这样基本能够做到一键安装OpenStack。

## 其他
运维做的事情虽然很杂，不过中间还是能学到不少东西，比如我在这些折腾过程中学到了一些网络知识。虚拟化技术真是很好玩，『云』这个东西其实并不只是一个大家炒作的概念，
即使公司现在只是用OpenStack来弄个私有云，这其中的便利真是让人感叹。有了这一套机器资源真是`挥之即来，用完即丢`。每个服务独立跑一个虚拟机上，相互独立。
